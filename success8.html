<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Full Documentation (Extended Demo)</title>

  <!-- Include Bootstrap 5 (CDN) -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >

  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background-color: #f8f9fa;
    }
    .header {
      background-color: #0d6efd;
      color: #fff;
      padding: 1rem;
      margin-bottom: 1rem;
    }
    .header h1 {
      margin: 0;
      font-size: 1.5rem;
    }
    .docs-container {
      display: flex;
      flex-wrap: nowrap;
    }
    /* Sidebar (Table of Contents) */
    .sidebar {
      width: 240px;
      min-height: calc(100vh - 3rem);
      background-color: #fff;
      border-right: 1px solid #e0e0e0;
      padding: 1rem;
    }
    .sidebar h2 {
      font-size: 1.1rem;
      margin-bottom: 1rem;
    }
    .sidebar ul {
      list-style: none;
      padding: 0;
    }
    .sidebar li {
      margin-bottom: 0.5rem;
    }
    .sidebar a {
      text-decoration: none;
      color: #0d6efd;
      font-weight: 500;
    }
    .sidebar a:hover {
      text-decoration: underline;
    }
    /* Main content area */
    .main-content {
      flex: 1;
      padding: 1rem;
    }
    /* Offcanvas styling */
    .offcanvas-header {
      border-bottom: 1px solid #e0e0e0;
    }
    .decodedContent {
      display: none;
      white-space: pre-wrap;
      border: 1px solid #ccc;
      background-color: #fafafa;
      padding: 1rem;
      border-radius: 4px;
      margin-top: 1rem;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <div class="header">
    <h1 class="mb-0">Full Documentation (Extended Demo)</h1>
  </div>

  <!-- Main container with sidebar + placeholder content area -->
  <div class="docs-container">
    <!-- Sidebar with Table of Contents -->
    <div class="sidebar">
      <h2>Documentation</h2>
      <ul>
        <!-- Original sections -->
        <li>
          <a href="#"
             data-bs-toggle="offcanvas"
             data-bs-target="#offcanvasAuth"
             aria-controls="offcanvasAuth">
            Authentication
          </a>
        </li>
        <li>
          <a href="#"
             data-bs-toggle="offcanvas"
             data-bs-target="#offcanvasEndpoints"
             aria-controls="offcanvasEndpoints">
            Endpoints
          </a>
        </li>
        <li>
          <a href="#"
             data-bs-toggle="offcanvas"
             data-bs-target="#offcanvasExamples"
             aria-controls="offcanvasExamples">
            Usage Examples
          </a>
        </li>
        <li>
          <a href="#"
             data-bs-toggle="offcanvas"
             data-bs-target="#offcanvasErrors"
             aria-controls="offcanvasErrors">
            Error Handling
          </a>
        </li>
        <!-- Additional sections -->
        <li>
          <a href="#"
             data-bs-toggle="offcanvas"
             data-bs-target="#offcanvasFiltering"
             aria-controls="offcanvasFiltering">
            Filtering & Querying
          </a>
        </li>
        <li>
          <a href="#"
             data-bs-toggle="offcanvas"
             data-bs-target="#offcanvasBulk"
             aria-controls="offcanvasBulk">
            Bulk Operations
          </a>
        </li>
        <li>
          <a href="#"
             data-bs-toggle="offcanvas"
             data-bs-target="#offcanvasWebhooks"
             aria-controls="offcanvasWebhooks">
            Webhooks
          </a>
        </li>
        <li>
          <a href="#"
             data-bs-toggle="offcanvas"
             data-bs-target="#offcanvasRateLimits"
             aria-controls="offcanvasRateLimits">
            Rate Limits
          </a>
        </li>
        <li>
          <a href="#"
             data-bs-toggle="offcanvas"
             data-bs-target="#offcanvasWebsockets"
             aria-controls="offcanvasWebsockets">
            Websockets
          </a>
        </li>
        <li>
          <a href="#"
             data-bs-toggle="offcanvas"
             data-bs-target="#offcanvasSDKs"
             aria-controls="offcanvasSDKs">
            SDKs & Libraries
          </a>
        </li>
        <li>
          <a href="#"
             data-bs-toggle="offcanvas"
             data-bs-target="#offcanvasPermissions"
             aria-controls="offcanvasPermissions">
            Permissions
          </a>
        </li>
      </ul>
    </div>

    <!-- Main content area (blank for demo) -->
    <div class="main-content">
      <p class="text-muted">
        Choose a topic from the sidebar to open detailed docs.
      </p>
    </div>
  </div>

  <!-- ========================================= -->
  <!-- Offcanvas #1: Authentication Docs        -->
  <!-- ========================================= -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasAuth" aria-labelledby="offcanvasAuthLabel">
    <div class="offcanvas-header">
      <h5 id="offcanvasAuthLabel" class="mb-0">Authentication</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <p class="text-muted">
        Covers user login, token generation, and session management.
      </p>
      <button class="btn btn-sm btn-success" onclick="revealDocs('auth')">
        Reveal Docs
      </button>
      <div id="decoded-auth" class="decodedContent"></div>
    </div>
  </div>

  <!-- ========================================= -->
  <!-- Offcanvas #2: Endpoints Docs             -->
  <!-- ========================================= -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasEndpoints" aria-labelledby="offcanvasEndpointsLabel">
    <div class="offcanvas-header">
      <h5 id="offcanvasEndpointsLabel" class="mb-0">Endpoints</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <p class="text-muted">
        A list of main REST endpoints covering various resources.
      </p>
      <button class="btn btn-sm btn-success" onclick="revealDocs('endpoints')">
        Reveal Docs
      </button>
      <div id="decoded-endpoints" class="decodedContent"></div>
    </div>
  </div>

  <!-- ========================================= -->
  <!-- Offcanvas #3: Usage Examples Docs        -->
  <!-- ========================================= -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasExamples" aria-labelledby="offcanvasExamplesLabel">
    <div class="offcanvas-header">
      <h5 id="offcanvasExamplesLabel" class="mb-0">Usage Examples</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <p class="text-muted">
        Shows realistic request/response patterns.
      </p>
      <button class="btn btn-sm btn-success" onclick="revealDocs('examples')">
        Reveal Docs
      </button>
      <div id="decoded-examples" class="decodedContent"></div>
    </div>
  </div>

  <!-- ========================================= -->
  <!-- Offcanvas #4: Error Handling Docs        -->
  <!-- ========================================= -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasErrors" aria-labelledby="offcanvasErrorsLabel">
    <div class="offcanvas-header">
      <h5 id="offcanvasErrorsLabel" class="mb-0">Error Handling</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <p class="text-muted">
        How to interpret various error codes.
      </p>
      <button class="btn btn-sm btn-success" onclick="revealDocs('errors')">
        Reveal Docs
      </button>
      <div id="decoded-errors" class="decodedContent"></div>
    </div>
  </div>

  <!-- ========================================= -->
  <!-- Offcanvas #5: Filtering & Querying       -->
  <!-- ========================================= -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasFiltering" aria-labelledby="offcanvasFilteringLabel">
    <div class="offcanvas-header">
      <h5 id="offcanvasFilteringLabel" class="mb-0">Filtering & Querying</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <p class="text-muted">
        Techniques for advanced filtering of data.
      </p>
      <button class="btn btn-sm btn-success" onclick="revealDocs('filtering')">
        Reveal Docs
      </button>
      <div id="decoded-filtering" class="decodedContent"></div>
    </div>
  </div>

  <!-- ========================================= -->
  <!-- Offcanvas #6: Bulk Operations            -->
  <!-- ========================================= -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasBulk" aria-labelledby="offcanvasBulkLabel">
    <div class="offcanvas-header">
      <h5 id="offcanvasBulkLabel" class="mb-0">Bulk Operations</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <p class="text-muted">
        Endpoints supporting batch creates, updates, and deletes.
      </p>
      <button class="btn btn-sm btn-success" onclick="revealDocs('bulk')">
        Reveal Docs
      </button>
      <div id="decoded-bulk" class="decodedContent"></div>
    </div>
  </div>

  <!-- ========================================= -->
  <!-- Offcanvas #7: Webhooks                   -->
  <!-- ========================================= -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasWebhooks" aria-labelledby="offcanvasWebhooksLabel">
    <div class="offcanvas-header">
      <h5 id="offcanvasWebhooksLabel" class="mb-0">Webhooks</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <p class="text-muted">
        How to configure and handle webhooks.
      </p>
      <button class="btn btn-sm btn-success" onclick="revealDocs('webhooks')">
        Reveal Docs
      </button>
      <div id="decoded-webhooks" class="decodedContent"></div>
    </div>
  </div>

  <!-- ========================================= -->
  <!-- Offcanvas #8: Rate Limits                -->
  <!-- ========================================= -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRateLimits" aria-labelledby="offcanvasRateLimitsLabel">
    <div class="offcanvas-header">
      <h5 id="offcanvasRateLimitsLabel" class="mb-0">Rate Limits</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <p class="text-muted">
        Information about our API rate limiting policies.
      </p>
      <button class="btn btn-sm btn-success" onclick="revealDocs('ratelimits')">
        Reveal Docs
      </button>
      <div id="decoded-ratelimits" class="decodedContent"></div>
    </div>
  </div>

  <!-- ========================================= -->
  <!-- Offcanvas #9: Websockets                 -->
  <!-- ========================================= -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasWebsockets" aria-labelledby="offcanvasWebsocketsLabel">
    <div class="offcanvas-header">
      <h5 id="offcanvasWebsocketsLabel" class="mb-0">Websockets</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <p class="text-muted">
        Real-time communication channels.
      </p>
      <button class="btn btn-sm btn-success" onclick="revealDocs('websockets')">
        Reveal Docs
      </button>
      <div id="decoded-websockets" class="decodedContent"></div>
    </div>
  </div>

  <!-- ========================================= -->
  <!-- Offcanvas #10: SDKs & Libraries          -->
  <!-- ========================================= -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasSDKs" aria-labelledby="offcanvasSDKsLabel">
    <div class="offcanvas-header">
      <h5 id="offcanvasSDKsLabel" class="mb-0">SDKs & Libraries</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <p class="text-muted">
        Official and community-maintained SDKs.
      </p>
      <button class="btn btn-sm btn-success" onclick="revealDocs('sdks')">
        Reveal Docs
      </button>
      <div id="decoded-sdks" class="decodedContent"></div>
    </div>
  </div>

  <!-- ========================================= -->
  <!-- Offcanvas #11: Permissions               -->
  <!-- ========================================= -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasPermissions" aria-labelledby="offcanvasPermissionsLabel">
    <div class="offcanvas-header">
      <h5 id="offcanvasPermissionsLabel" class="mb-0">Permissions</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <p class="text-muted">
        Role-based access control and permission scopes.
      </p>
      <button class="btn btn-sm btn-success" onclick="revealDocs('permissions')">
        Reveal Docs
      </button>
      <div id="decoded-permissions" class="decodedContent"></div>
    </div>
  </div>

  <!-- ========================================= -->
  <!-- JavaScript for hidden docs and decoding  -->
  <!-- ========================================= -->
  <script>
    /**
     * Store each doc section in ASCII and encode with btoa.
     * This avoids issues with special characters.
     */
    const docsMap = {
      auth: btoa(
`# Authentication
Our authentication system uses OAuth 2.0 and JSON Web Tokens (JWT).

1. POST /api/auth/login
   - Request body: { "username": "string", "password": "string" }
   - Response:     { "token": "<jwt-token>", "expires": 3600 }

2. POST /api/auth/logout
   - Invalidates the current token.

Include your token in the Authorization header on protected routes:
   Authorization: Bearer <jwt-token>
`
      ),
      endpoints: btoa(
`# Endpoints
Below are the main REST endpoints grouped by resource. All endpoints require an Authorization header if they access protected data.

## User Management
1. GET /api/users
   - Returns a list of users (query: page, limit, sort, filters)
2. POST /api/users
   - Creates a new user (request: username, email, password)
3. GET /api/users/:id
   - Retrieves details of a user by ID
4. PUT /api/users/:id
   - Updates the user's info
5. DELETE /api/users/:id
   - Deletes the specified user

## Product Management
1. GET /api/products
   - Returns a list of products (query: category, page, limit)
2. POST /api/products
   - Creates a new product (request: name, price, category)
3. GET /api/products/:id
   - Retrieves product by ID
4. PUT /api/products/:id
   - Updates product info
5. DELETE /api/products/:id
   - Deletes the product

## Orders
1. GET /api/orders
   - Returns a list of orders (query: status, page, limit)
2. POST /api/orders
   - Creates a new order (request: userId, items[ productId, qty ])
3. GET /api/orders/:id
   - Retrieves order by ID
4. PUT /api/orders/:id
   - Updates order status
5. DELETE /api/orders/:id
   - Cancels order (if not shipped)

## Invoices
1. GET /api/invoices
   - Returns a list of invoices
2. GET /api/invoices/:id
   - Retrieves a specific invoice
3. POST /api/invoices
   - Generates a new invoice

## Notifications
1. GET /api/notifications
   - Retrieves notifications
2. POST /api/notifications/mark-read
   - Marks notifications as read

## Messages
1. GET /api/messages
   - Returns user's messages
2. POST /api/messages
   - Sends a message from one user to another
`
      ),
      examples: btoa(
`# Usage Examples
1) Creating a New User (POST /api/users):
{
  "username": "janedoe",
  "email": "jane@example.com",
  "password": "secret123"
}

2) Logging In (POST /api/auth/login):
{
  "username": "janedoe",
  "password": "secret123"
}

3) Protected Resource (GET /api/users?page=1&limit=10):
Authorization: Bearer <jwt-token>

4) Creating an Order (POST /api/orders):
{
  "userId": "abc123",
  "items": [
    { "productId": "prod001", "qty": 2 },
    { "productId": "prod002", "qty": 1 }
  ]
}

5) Logging Out (POST /api/auth/logout)
`
      ),
      errors: btoa(
`# Error Handling
Standard HTTP status codes:
400 Bad Request, 401 Unauthorized, 403 Forbidden, 404 Not Found,
409 Conflict, 500 Server Error

Example:
{
  "error": "Invalid credentials",
  "code": 401
}
`
      ),
      filtering: btoa(
`# Filtering & Querying
Endpoints accept query parameters, e.g.:
GET /api/users?status=active&role=admin
GET /api/products?category=electronics&price_lt=1000
Operators: eq, lt, gt, lte, gte, in, contains
`
      ),
      bulk: btoa(
`# Bulk Operations
1. POST /api/users/bulk-create
   - Body: [ {...}, {...} ] (create multiple)
2. PUT /api/users/bulk-update
   - Body: [ { "id": "...", ... }, ... ]
3. DELETE /api/users/bulk-delete
   - Body: [ "id1", "id2", ... ]

Each returns a summary of successes/failures.
`
      ),
      webhooks: btoa(
`# Webhooks
Notifications for external services.

1. GET /api/webhooks
2. POST /api/webhooks
   - { "url": "https://...", "events": ["orderCreated","userRegistered"] }
3. DELETE /api/webhooks/:id

Events: userRegistered, userDeleted, orderCreated, orderUpdated, etc.
`
      ),
      ratelimits: btoa(
`# Rate Limits
- 100 requests/minute
- 1000 requests/day

Headers:
X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset

429 Too Many Requests if exceeded.
`
      ),
      websockets: btoa(
`# Websockets
wss://api.example.com/realtime?token=<jwt>
Events: message, notification, orderUpdate
`
      ),
      sdks: btoa(
`# SDKs & Libraries
Official:
- JS/TS, Python, Java

Community:
- PHP, Ruby

Install:
- npm install example-sdk
- pip install example-sdk
`
      ),
      permissions: btoa(
`# Permissions
Role-based (RBAC):
- admin, manager, user, guest
Scopes:
- user:read, user:create, ...
- product:read, product:update, ...
- order:read, order:create, order:delete, ...
Check token claims for allowed actions.
`
      )
    };

    function revealDocs(type) {
      const containerId = `decoded-${type}`;
      const container = document.getElementById(containerId);
      if (!container) return;

      const decodedText = atob(docsMap[type]);
      container.textContent = decodedText;
      container.style.display = "block";
    }
  </script>

  <!-- ========================================= -->
  <!-- Plain-Text Docs in a <details> snippet   -->
  <!-- ========================================= -->
  <details style="margin: 2rem;">
    <summary style="cursor: pointer; font-weight: bold;">
      Show/Hide Full Documentation (Plain Text)
    </summary>
    <div>
      <h3>Authentication</h3>
      <p>Our authentication uses OAuth 2.0 and JWT.  
      <strong>POST /api/auth/login</strong> → returns {"token":"&lt;jwt&gt;","expires":3600}.  
      <strong>POST /api/auth/logout</strong> → invalidates token.  
      Use <code>Authorization: Bearer &lt;jwt&gt;</code> on protected routes.</p>

      <h3>Endpoints</h3>
      <p>All require <code>Authorization</code> if accessing protected data.</p>
      <ul>
        <li><strong>User Management</strong>: /api/users (+ CRUD endpoints)</li>
        <li><strong>Product Management</strong>: /api/products (+ CRUD endpoints)</li>
        <li><strong>Orders</strong>: /api/orders (+ CRUD endpoints)</li>
        <li><strong>Invoices</strong>: /api/invoices (+ create/fetch endpoints)</li>
        <li><strong>Notifications</strong>: /api/notifications (+ mark-read)</li>
        <li><strong>Messages</strong>: /api/messages (+ send)</li>
      </ul>

      <h3>Usage Examples</h3>
      <ol>
        <li>POST /api/users (create user)</li>
        <li>POST /api/auth/login (login)</li>
        <li>GET /api/users?limit=10 (requires Bearer token)</li>
        <li>POST /api/orders (create an order)</li>
        <li>POST /api/auth/logout (logout)</li>
      </ol>

      <h3>Error Handling</h3>
      <p>HTTP codes: 400, 401, 403, 404, 409, 500.  
      Example: {"error":"Invalid credentials","code":401}</p>

      <h3>Filtering & Querying</h3>
      <p>Example: <code>/api/products?category=electronics&price_lt=1000</code>.  
      Operators: eq, lt, gt, lte, gte, in, contains.</p>

      <h3>Bulk Operations</h3>
      <p>POST <code>/api/users/bulk-create</code>, PUT <code>/api/users/bulk-update</code>, DELETE <code>/api/users/bulk-delete</code>, etc.</p>

      <h3>Webhooks</h3>
      <p>Configure external callbacks. /api/webhooks, /api/webhooks/:id.  
      Events: userRegistered, userDeleted, orderCreated, orderUpdated, etc.</p>

      <h3>Rate Limits</h3>
      <p>100 requests/min, 1000/day. Exceed → 429.  
      Headers: <code>X-RateLimit-Limit</code>, <code>X-RateLimit-Remaining</code>, <code>X-RateLimit-Reset</code>.</p>

      <h3>Websockets</h3>
      <p><code>wss://api.example.com/realtime?token=&lt;jwt&gt;</code>.  
      Events: message, notification, orderUpdate.</p>

      <h3>SDKs & Libraries</h3>
      <p>Official: JS/TS, Python, Java. Community: PHP, Ruby.  
      <code>npm install example-sdk</code>, <code>pip install example-sdk</code>.</p>

      <h3>Permissions</h3>
      <p>RBAC roles: admin, manager, user, guest.  
      Scopes: user:read, product:create, order:delete, etc.</p>
    </div>
  </details>

  <!-- Bootstrap JavaScript bundle (CDN) -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js">
  </script>
</body>
</html>
