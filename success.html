<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Full Documentation (Demo)</title>

  <!-- Include Bootstrap 5 (CDN) -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >

  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background-color: #f8f9fa;
    }
    .header {
      background-color: #0d6efd;
      color: #fff;
      padding: 1rem;
      margin-bottom: 1rem;
    }
    .header h1 {
      margin: 0;
      font-size: 1.5rem;
    }
    .docs-container {
      display: flex;
      flex-wrap: nowrap;
    }
    /* Sidebar (Table of Contents) */
    .sidebar {
      width: 240px;
      min-height: calc(100vh - 3rem);
      background-color: #fff;
      border-right: 1px solid #e0e0e0;
      padding: 1rem;
    }
    .sidebar h2 {
      font-size: 1.1rem;
      margin-bottom: 1rem;
    }
    .sidebar ul {
      list-style: none;
      padding: 0;
    }
    .sidebar li {
      margin-bottom: 0.5rem;
    }
    .sidebar a {
      text-decoration: none;
      color: #0d6efd;
      font-weight: 500;
    }
    .sidebar a:hover {
      text-decoration: underline;
    }
    /* Main content area */
    .main-content {
      flex: 1;
      padding: 1rem;
    }
    /* Offcanvas styling */
    .offcanvas-header {
      border-bottom: 1px solid #e0e0e0;
    }
    .decodedContent {
      display: none;
      white-space: pre-wrap; /* Preserve line breaks */
      border: 1px solid #ccc;
      background-color: #fafafa;
      padding: 1rem;
      border-radius: 4px;
      margin-top: 1rem;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <div class="header">
    <h1 class="mb-0">Full Documentation (Demo)</h1>
  </div>

  <!-- Main container with sidebar + placeholder content area -->
  <div class="docs-container">
    <!-- Sidebar with Table of Contents -->
    <div class="sidebar">
      <h2>Documentation</h2>
      <ul>
        <li>
          <a href="#"
             data-bs-toggle="offcanvas"
             data-bs-target="#offcanvasAuth"
             aria-controls="offcanvasAuth">
            Authentication
          </a>
        </li>
        <li>
          <a href="#"
             data-bs-toggle="offcanvas"
             data-bs-target="#offcanvasEndpoints"
             aria-controls="offcanvasEndpoints">
            Endpoints
          </a>
        </li>
        <li>
          <a href="#"
             data-bs-toggle="offcanvas"
             data-bs-target="#offcanvasExamples"
             aria-controls="offcanvasExamples">
            Usage Examples
          </a>
        </li>
        <li>
          <a href="#"
             data-bs-toggle="offcanvas"
             data-bs-target="#offcanvasErrors"
             aria-controls="offcanvasErrors">
            Error Handling
          </a>
        </li>
      </ul>
    </div>

    <!-- Main content area (blank for demo) -->
    <div class="main-content">
      <p class="text-muted">
        Choose a topic from the sidebar to open detailed docs.
      </p>
    </div>
  </div>

  <!-- ========================================= -->
  <!-- Offcanvas #1: Authentication Docs        -->
  <!-- ========================================= -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasAuth" aria-labelledby="offcanvasAuthLabel">
    <div class="offcanvas-header">
      <h5 id="offcanvasAuthLabel" class="mb-0">Authentication</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <p class="text-muted">
        Covers user login, token generation, and session management.
      </p>
      <button class="btn btn-sm btn-success" onclick="revealDocs('auth')">
        Reveal Docs
      </button>
      <div id="decoded-auth" class="decodedContent"></div>
    </div>
  </div>

  <!-- ========================================= -->
  <!-- Offcanvas #2: Endpoints Docs             -->
  <!-- ========================================= -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasEndpoints" aria-labelledby="offcanvasEndpointsLabel">
    <div class="offcanvas-header">
      <h5 id="offcanvasEndpointsLabel" class="mb-0">Endpoints</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <p class="text-muted">
        A list of main REST endpoints for user management and more.
      </p>
      <button class="btn btn-sm btn-success" onclick="revealDocs('endpoints')">
        Reveal Docs
      </button>
      <div id="decoded-endpoints" class="decodedContent"></div>
    </div>
  </div>

  <!-- ========================================= -->
  <!-- Offcanvas #3: Usage Examples Docs        -->
  <!-- ========================================= -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasExamples" aria-labelledby="offcanvasExamplesLabel">
    <div class="offcanvas-header">
      <h5 id="offcanvasExamplesLabel" class="mb-0">Usage Examples</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <p class="text-muted">
        Shows realistic request/response patterns.
      </p>
      <button class="btn btn-sm btn-success" onclick="revealDocs('examples')">
        Reveal Docs
      </button>
      <div id="decoded-examples" class="decodedContent"></div>
    </div>
  </div>

  <!-- ========================================= -->
  <!-- Offcanvas #4: Error Handling Docs        -->
  <!-- ========================================= -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasErrors" aria-labelledby="offcanvasErrorsLabel">
    <div class="offcanvas-header">
      <h5 id="offcanvasErrorsLabel" class="mb-0">Error Handling</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <p class="text-muted">
        How to interpret various error codes.
      </p>
      <button class="btn btn-sm btn-success" onclick="revealDocs('errors')">
        Reveal Docs
      </button>
      <div id="decoded-errors" class="decodedContent"></div>
    </div>
  </div>

  <!-- ========================================= -->
  <!-- JavaScript for hidden docs and decoding  -->
  <!-- ========================================= -->
  <script>
    /**
     * Store each doc section in ASCII to avoid btoa errors.
     * No curly quotes or special characters that break btoa.
     */
    const docsMap = {
      auth: btoa(
`# Authentication
Our authentication system uses OAuth 2.0 and JSON Web Tokens (JWT).

1. POST /api/auth/login
   - Request body: { "username": "string", "password": "string" }
   - Response:     { "token": "<jwt-token>", "expires": 3600 }

2. POST /api/auth/logout
   - Invalidates the current token.

Include your token in the Authorization header on protected routes:
   Authorization: Bearer <jwt-token>
`
      ),

      endpoints: btoa(
`# Endpoints
These are the main REST endpoints in our service:

1. GET /api/users
   - Returns a list of users.
   - Supports "page" and "limit" queries.

2. POST /api/users
   - Creates a new user.
   - Request body: { "username": "string", "email": "string" }

3. GET /api/users/:id
   - Retrieves details of a user by ID.

4. PUT /api/users/:id
   - Updates the user's info.

5. DELETE /api/users/:id
   - Deletes the specified user.
`
      ),

      examples: btoa(
`# Usage Examples
1) Creating a New User
POST /api/users
{
  "username": "janedoe",
  "email": "jane@example.com"
}

2) Logging In
POST /api/auth/login
{
  "username": "janedoe",
  "password": "secret123"
}

3) Fetching Protected Resource
GET /api/users
Headers:
  Authorization: Bearer <jwt-token>

Response:
  { "data": [ ...user objects... ] }

4) Logging Out
POST /api/auth/logout
`
      ),

      errors: btoa(
`# Error Handling
The API returns standard HTTP status codes:

400 Bad Request   - Invalid parameters
401 Unauthorized  - Missing or expired token
403 Forbidden     - No permission to access resource
404 Not Found     - Resource does not exist
500 Server Error  - Unknown error on the server

Example error response:
{
  "error": "Invalid credentials",
  "code": 401
}
`
      )
    };

    /**
     * Reveal Docs in the specified section (auth, endpoints, examples, errors).
     * This function is called by each "Reveal Docs" button.
     */
    function revealDocs(type) {
      // Build the ID of the container (decoded-auth, decoded-endpoints, etc.)
      const containerId = `decoded-${type}`;
      const container = document.getElementById(containerId);
      if (!container) return;

      // Decode and display the text
      const decodedText = atob(docsMap[type]);
      container.textContent = decodedText;
      container.style.display = "block";
    }
  </script>

  <!-- Bootstrap JavaScript bundle (CDN) -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js">
  </script>

  <!-- ========================================= -->
  <!-- Hidden Snippet: Plaintext Docs           -->
  <!-- Parsable by bots/AI, but not shown       -->
  <!-- ========================================= -->
  <div id="hidden-all-docs" style="display:none;">
    # Here is ALL of our Documentation in plain text:
    # ------------------------------------------------
    # AUTHENTICATION
    Our authentication system uses OAuth 2.0 and JSON Web Tokens (JWT).
    POST /api/auth/login
    POST /api/auth/logout
    Include your token in the Authorization header on protected routes.

    # ENDPOINTS
    GET /api/users
    POST /api/users
    GET /api/users/:id
    PUT /api/users/:id
    DELETE /api/users/:id

    # USAGE EXAMPLES
    Creating a new user, Logging in, Fetching protected resources, Logging out.

    # ERROR HANDLING
    400 Bad Request, 401 Unauthorized, 403 Forbidden, 404 Not Found, 500 Server Error
    Example response: { "error": "Invalid credentials", "code": 401 }
  </div>

</body>
</html>
